<?phprequire( __DIR__ . '/omoclass_common.php' );//. サイクル番号決定define( 'FN_NODE_PROF', _fn_last( 'profdb' ) );define( 'CYCLE', _fn2num( FN_NODE_PROF ) + 1 );_line( 'classification', 'cycle #' . CYCLE );$dn = _fn2( 'dn_cls', CYCLE );_mkdir( $dn );exec( "rm -f $dn/* " );//. 検索$db_data = new cls_sqlite( FN_DB );$obj_all = $db_data->q(['select' =>'*' ]);$db_node = new cls_sqlite( FN_NODE_PROF );define( 'COMP_PARAM', _get_comp_par() );//- データごとwhile(true){	_count( 1000 );	$data = $obj_all->fetchObject();	if ( $data === false ) break;	$prof_data = _bin2prof( $data->data );	$obj_rep = $db_node->q(['select' => [ 'id', 'data' ] ]);	//- 各ノードと比較分類	$score = [];	while(true){		$node = $obj_rep->fetchObject();		if ( $node === false ) break;		$score [ $node->id ]= _getscore( $prof_data, _bin2prof( $node->data ), COMP_PARAM );	}	arsort( $score );	$lev = 5;	//- 集計	foreach ( $score as $id => $sc ) {		file_put_contents(			_fn2( 'cls', CYCLE, $id ),			$data->id . "\t" . $sc . "\t" . $lev . "\n",			FILE_APPEND 		);		-- $lev;		if ( $lev == 0 ) break;	}}