<?phprequire( __DIR__ . '/omoclass_common.php' );//. サイクル番号決定define( 'FN_NODE_PROF', _fn_last( 'profdb' ) );define( 'CYCLE', _fn2num( FN_NODE_PROF ) + 1 );$o_db = new cls_sqlite( FN_DB );$o_dbout = _prep_profdb( CYCLE );//. 検索foreach ( range( 0, NUM_CLASS - 1 ) as $node_num ) {	_count(10);	$avg =[];	$res = _tsv_load( _fn2( 'cls', CYCLE, $node_num ) );	$cnt = count( $res );	$rand = _rand( CYCLE );	foreach ( array_keys( $res ) as $id ) {		$prof_set = _bin2prof( _get_data( $o_db, $id ) );		foreach ( $prof_set as $prof_num => $prof ) {			foreach ( $prof as $num => $val ) {				$avg[ $prof_num ][ $num ] += $rand * ( $val / $cnt );			}		}	}	$o_dbout->set([ $node_num, _prof2bin( $avg ), $avg[3][0], $avg[3][1], $avg[3][2] ]);}$o_dbout->end();function _rand( $c ) {	$c = ( 10 - ( $c % 20 ) ) / 10; //- 1, 0.9, ..., -0.9	if ( $c <= 0 ) return 1;	$r = mt_rand() / mt_getrandmax() * 0.4 - 0.2; //- -0.2 - 0.2	return 1 + $r * $c;}